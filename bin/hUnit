#!/usr/bin/hhvm
<?hh
//
// Copyright 2018 hUnit project developers.
// See COPYRIGHT.txt
// 
// This file is part of the hUnit project and subject to license terms.
// See LICENSE.txt
// 

namespace hUnit;

require_once "/usr/local/hUnit/src/FileSystemScanner.hh";
require_once "/usr/local/hUnit/src/hUnit.hh";

$paths = (new Vector($argv))->removeKey(0);
$scanner = new FileSystemScanner();

foreach($scanner->scanPaths($paths)->sourceFiles as $file) {
    print("Include $file\n");
    
    require_once $file;
}

$classes = (new Vector(get_declared_classes()))->map((string $className) ==> {
    return new \ReflectionClass($className);
});

exit((new hUnit($classes))->run()); 
